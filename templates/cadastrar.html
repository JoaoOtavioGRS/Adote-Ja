{% extends "base.html" %}
{% block title %}Cadastrar Usuário - Adote Já{% endblock %}

{% block content %}
<h1 class="mb-4 text-center">Cadastrar Usuário</h1>

<form method="POST" enctype="multipart/form-data" class="mx-auto" style="max-width: 400px;">
    <div class="mb-3">
        <label class="form-label">Nome:</label>
        <input type="text" name="nome" class="form-control" required />
    </div>
    <div class="mb-3">
        <label class="form-label">E-mail:</label>
        <input type="email" name="email" class="form-control" required />
    </div>
       <div class="mb-3">
        <label class="form-label">Senha:</label>
        <input type="password" name="senha" class="form-control" required />
    </div>
    <div class="mb-3">
    <label class="form-label">Confirmar Senha:</label>
    <input type="password" name="confirmar_senha" class="form-control" required />
</div>
    <div class="mb-3">
        <label class="form-label">Telefone:</label>
        <input type="text" name="telefone" class="form-control" />
    </div>
   <!-- Estado -->
<!-- Estado -->
<div class="mb-3">
    <label for="estado" class="form-label">Estado:</label>
    <select class="form-select" id="estado" name="estado" required>
        <option value="">Selecione um estado</option>
        {% for estado in estados %}
            <option value="{{ estado.id }}">{{ estado.estado }}</option>
        {% endfor %}
    </select>
</div>

<!-- Cidade -->
<div class="mb-3">
    <label for="cidade" class="form-label">Cidade:</label>
    <select class="form-select" id="cidade" name="cidade" required>
        <option value="">Selecione uma cidade</option>
    </select>
</div>

<script>
    const cidadesPorEstado = {{ cidades_por_estado | tojson }};
    const estadoSelect = document.getElementById('estado');
    const cidadeSelect = document.getElementById('cidade');

    estadoSelect.addEventListener('change', function() {
        const uf = this.value;
        cidadeSelect.innerHTML = '<option value="">Selecione uma cidade</option>';
        if (uf && cidadesPorEstado[uf]) {
            cidadesPorEstado[uf].forEach(function(cidade) {
                const option = document.createElement('option');
                option.value = cidade;
                option.text = cidade;
                cidadeSelect.appendChild(option);
            });
        }
    });
</script>
    <div class="mb-3">
        <label class="form-label">Foto do Perfil (opcional):</label>
        <input type="file" name="foto" class="form-control" accept="image/*" />
    </div>
    <button type="submit" class="btn btn-success w-100">Cadastrar</button>
</form>
{% endblock %}
